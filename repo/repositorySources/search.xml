<meta_metadata_repository name="search" default_user_agent_name="chrome_2" package="ecologylab.semantics.generated.library.bing" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<!-- +++++++++++++++++++++++++++++++++ More Specific Types - Search & its Children +++++++++++++++++++++++++++++++++ -->

	<meta_metadata name="search_result" extends="document" comment="">
		<scalar name="heading" scalar_type="String" comment="The heading of search result" />
		<scalar name="snippet" scalar_type="String" comment="The snippet of search result" />
		<scalar name="link" scalar_type="ParsedURL" comment="The link of the search result" />
	</meta_metadata>
	
	<meta_metadata name="search" extends="document" comment="">
		<collection name="search_results" child_type="search_result" no_wrap="true" />
	</meta_metadata>
	
	<meta_metadata name="google_search" type="search" comment="The google Search class" user_agent_name="opera_9" parser="xpath">
		<selector url_stripped="http://www.google.com/search"/>
		<collection name="search_results" xpath="//div[@id='res']//div//ol/li[@*]">
			<scalar name="heading" xpath="./h3/a" />
			<scalar name="snippet" xpath="./div[1]" />
			<scalar name="link" xpath="./h3/a/@href" />
		</collection>
		<semantic_actions>
			<get_field name="search_results" />
			<for_each collection="search_results" as="res">
				<get_field object="res" name="link" />
				<parse_document now="true">
					<arg value="link" name="container_link" />
				</parse_document>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	
	<meta_metadata name="my_google_search" type="search" comment="The my_google Search class" user_agent_name="opera_9" parser="xpath">
		<selector url_stripped="http://staging.cs.tamu.edu:8080/my_google/search"/>
		<collection name="search_results" xpath="//div[@class='result']">
			<scalar name="heading" xpath="./a/@href" />
			<scalar name="snippet" xpath="./p" />
			<scalar name="link" xpath="./span" />
		</collection>
		<semantic_actions>
			<get_field name="search_results" />
			<for_each collection="search_results" as="res">
				<get_field object="res" name="link" />
				<parse_document now="true">
					<arg value="link" name="container_link" />
				</parse_document>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	
	<meta_metadata name="my_google_ecology0_search" type="search" extends="my_google_search" comment="The my_google_ecology0 Search class" parser="xpath">
		<selector url_stripped="http://ecology0.csdl.tamu.edu/my_google/search"/>
	</meta_metadata>
	
	<meta_metadata name="yahoo_thumbnail" extends="metadata">
		<scalar name="thumb_url" tag="Url" scalar_type="ParsedURL" hint="XML_LEAF"/>
		<scalar name="width" tag="Width" scalar_type="Int" hint="XML_LEAF"/>
		<scalar name="height" tag="Height" scalar_type="Int" hint="XML_LEAF"/>
	</meta_metadata>
	
	<meta_metadata name="yahoo_result_set" extends="document" comment="Yahoo Web Search Service" tag="ResultSet" parser="direct">
		<collection name="results" child_type="result" no_wrap="true" comment="Collection of results for yahoo search" child_tag="Result">
			<scalar name="title" scalar_type="String" tag="Title" hint="XML_LEAF" />
			<scalar name="summary" scalar_type="String" tag="Summary" hint="XML_LEAF" />
			<scalar name="url" scalar_type="ParsedURL" tag="Url" hint="XML_LEAF" />
			<scalar name="referer_url" scalar_type="ParsedURL" tag="RefererUrl" hint="XML_LEAF" />
			<!--
			<scalar name="modification_date" scalar_type="Date" tag="ModificationDate" hint="XML_LEAF" />
			-->
			<scalar name="mime_type" scalar_type="String" tag="MimeType" hint="XML_LEAF" />
			<composite name="thumbnail" tag="Thumbnail" type="yahoo_thumbnail" />
		</collection>
	</meta_metadata>
	
	<meta_metadata name="yahoo_web_search" type="yahoo_result_set">
	<selector  url_stripped="http://api.search.yahoo.com/WebSearchService/V1/webSearch"/>
		<semantic_actions>
			<get_field name="results" />
			<for_each collection="results" as="result">
				<get_field object="result" name="url" />
				<get_field object="result" name="summary" />
				<parse_document now="true">
					<arg value="url" name="container_link" />
					<arg value="summary" name="anchor_text" />
				</parse_document>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	
	<meta_metadata name="yahoo_image_search" type="yahoo_result_set">
		<selector url_stripped="http://api.search.yahoo.com/ImageSearchService/V1/imageSearch"/>
		<semantic_actions>
			<get_field name="results" />
			<for_each collection="results" as="result">
				<get_field object="result" name="url" />
				<get_field object="result" name="referer_url" />
				<get_field object="result" name="summary" />
				<create_and_visualize_img_surrogate>
					<arg value="url" name="image_purl" />
					<arg value="summary" name="caption" />
					<arg value="referer_url" name="href" />
				</create_and_visualize_img_surrogate>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	
	<meta_metadata name="yahoo_news_search" type="yahoo_result_set">
		<selector url_stripped="http://api.search.yahoo.com/NewsSearchService/V1/newsSearch"/>
		<semantic_actions>
			<get_field name="results" />
			<for_each collection="results" as="result">
				<get_field object="result" name="summary" />
				<get_field object="result" name="thumbnail" />
				<get_field object="result" name="url" />
				<choose>
					<case>
						<not_null value="thumbnail"/>
						<get_field object="thumbnail" name="thumb_url" />
						<create_and_visualize_img_surrogate>
							<arg value="thumb_url" name="image_purl" />
							<arg value="summary" name="caption" />
							<arg value="url" name="href" />
						</create_and_visualize_img_surrogate>
					</case>
					<otherwise>
						<parse_document now="true">
							<arg value="url" name="container_link" />
							<arg value="summary" name="anchor_text" />
						</parse_document>
					</otherwise>
				</choose>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	
	<!-- 
	<meta_metadata name="bing_result_set" extends="document" comment="Bing Web Search Service" tag="ResultSet" parser="direct">
		<collection name="results" child_type="bing_result" no_wrap="true" comment="Collection of results for bing search" child_tag="web:Web">
			<scalar name="title" scalar_type="String" tag="web:Title" hint="XML_LEAF" />
			<scalar name="description" scalar_type="String" tag="web:Description" hint="XML_LEAF" />
			<scalar name="url" scalar_type="ParsedURL" tag="web:Url" hint="XML_LEAF" />
		</collection>
	</meta_metadata>
	
	<meta_metadata name="bing_web_search" type="bing_result_set">
	<selector  url_stripped="http://api.bing.net/xml.aspx?Sources=web+spell"/>
		<semantic_actions>
			<get_field name="results" />
			<for_each collection="results" as="result">
				<get_field object="result" name="url" />
				<get_field object="result" name="description" />
				<parse_document now="true">
					<arg value="url" name="container_link" />
					<arg value="description" name="anchor_text" />
				</parse_document>
			</for_each>
		</semantic_actions>
	</meta_metadata>
	-->
	
</meta_metadata_repository>
