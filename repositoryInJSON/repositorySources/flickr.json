{"meta_metadata_repository":{"name":"flickr","package":"ecologylab.semantics.generated.library.flickr","meta_metadata":[{"name":"flickr_tag","extends":"metadata","visibility":"GLOBAL","kids":[{"scalar":{"name":"tag_name","navigates_to":"tag_link","scalar_type":"String","as_composite_scalar":"true","kids":[]}},{"scalar":{"name":"tag_link","hide":"true","scalar_type":"ParsedURL","kids":[]}}]},{"name":"flickr_search","comment":"The flickr search class","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[],"selector":[{"name":"flickr_search_selector"}]},{"name":"flickr_image_detail","comment":"A Flickr Image result page","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[{"scalar":{"name":"title","xpath":".\/h1","context_node":"photoTD","kids":[]}},{"scalar":{"name":"description","xpath":".\/div[@class='photo-desc']","context_node":"photoTD","ignore_in_term_vector":"true","kids":[]}},{"scalar":{"name":"thumbnail_kludge","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"image_kludge","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"collection":{"name":"flickr_tags","xpath":"\/\/a[@class='tag-item ywa-track']","child_type":"flickr_tag","kids":[{"scalar":{"name":"tag_name","xpath":".","kids":[]}},{"scalar":{"name":"tag_link","xpath":".\/@href","kids":[],"filter":{"regex":"\/photos\/[^\/]+\/","replace":"\/photos\/"}}}]}}],"def_var":[{"name":"photoTD","xpath":"\/\/div[@id='meta']","type":"node"}],"selector":[{"name":"flickr_image_detail_selector"}]},{"name":"flickr_link","extends":"metadata","visibility":"GLOBAL","kids":[{"scalar":{"name":"link","comment":"flickr_image_detail","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"title","comment":"flickr_image_detail","navigates_to":"link","scalar_type":"String","kids":[]}}]},{"name":"flickr_author","comment":"All flickr photos of a particular user","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"flickr_link_set","comment":"Collection of all images of a user","xpath":"\/\/div[@class='Photo']","child_type":"flickr_link","kids":[{"scalar":{"name":"link","xpath":".\/span\/a\/@href","kids":[]}},{"scalar":{"name":"title","xpath":".\/span\/a\/@title","kids":[],"filter":{"regex":"by \\w*","replace":""}}}]}}],"selector":[{"url_regex":"http:\/\/www.flickr.com\/photos\/(?!tags)[A-z0-9_@-]+\/$","domain":"flickr.com"}],"semantic_actions":[{"get_field":{"name":"flickr_link_set","arg":[]}},{"for_each":{"collection":"flickr_link_set","as":"result","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"result","name":"link","arg":[]}},{"get_field":{"object":"result","name":"title","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"anchor_text","value":"title"},{"name":"location","value":"link"}]}}]}}]},{"name":"flickr_tags_interesting","comment":"Used for flickr search results","extends":"search","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"flickr_link_set","comment":"Collection of all images of a user","xpath":"\/\/span[@class='photo_container pc_t']","child_type":"flickr_link","kids":[{"scalar":{"name":"link","xpath":".\/a\/@href","kids":[]}}]}}],"selector":[{"url_regex":"http:\/\/www.flickr.com\/photos\/tags\/[a-z0-9]+\/interesting\/*$","domain":"flickr.com"}],"semantic_actions":[{"get_field":{"name":"flickr_link_set","arg":[]}},{"for_each":{"collection":"flickr_link_set","as":"result","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"result","name":"link","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"link"}]}}]}}]},{"name":"flickr_tags","comment":"For flickr crawled tags","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"flickr_link_set","comment":"Collection of all images of a user","xpath":"\/\/span[@class='photo_container pc_t']","child_type":"flickr_link","kids":[{"scalar":{"name":"link","xpath":".\/a\/@href","kids":[]}}]}}],"selector":[{"url_regex":"http:\/\/www.flickr.com\/photos\/tags\/[a-z0-9]+\/*$","domain":"flickr.com"}],"semantic_actions":[{"get_field":{"name":"flickr_link_set","arg":[]}},{"for_each":{"collection":"flickr_link_set","as":"result","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"result","name":"link","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"link"}]}}]}}]},{"name":"flickr_search_two","comment":"The flickr search class","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"flickr_results","xpath":"\/\/div[@class='DetailResults']\/\/div[@class='box']","child_type":"flickr_image_detail","kids":[{"scalar":{"name":"title","xpath":".\/\/h3[@class='PicTitle']","kids":[]}},{"scalar":{"name":"thumbnail_kludge","xpath":".\/\/span\/\/img\/@src","kids":[]}},{"scalar":{"name":"location","xpath":".\/\/span\/\/a\/@href","kids":[]}},{"collection":{"name":"flickr_tags","xpath":".\/\/div[@class='ListThings']\/\/a[starts-with(@href,'\/photos\/tag')]","child_type":"flickr_tag","kids":[{"scalar":{"name":"tag_name","xpath":".","kids":[]}},{"scalar":{"name":"tag_link","xpath":".\/@href","kids":[],"filter":{"regex":"\/clusters\/","replace":""}}}]}}]}}],"selector":[{"name":"flickr_search_selector"}],"semantic_actions":[{"get_field":{"name":"flickr_results","arg":[]}},{"for_each":{"collection":"flickr_results","as":"result","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"result","name":"title","arg":[]}},{"get_field":{"object":"result","name":"thumbnail_kludge","arg":[]}},{"create_and_visualize_img_surrogate":{"name":"imgSurrogate","arg":[{"name":"caption","value":"title"},{"name":"image_purl","value":"thumbnail_kludge"},{"name":"source_document","value":"result"}]}},{"parse_document":{"link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"result","value":"document"}]}},{"get_field":{"object":"result","name":"flickr_tags","arg":[]}},{"for_each":{"collection":"flickr_tags","as":"tag","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"tag","name":"tag_link","arg":[]}},{"get_field":{"object":"tag","name":"tag_name","arg":[]}},{"parse_document":{"link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"anchor_text","value":"tag_name"},{"name":"location","value":"tag_link"},{"name":"source_document","value":"result"}]}}]}}]}}]},{"name":"author_photos","extends":"metadata","visibility":"GLOBAL","kids":[{"scalar":{"name":"author_photostream_link","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"author_photostream","navigates_to":"author_photostream_link","scalar_type":"String","kids":[]}},{"scalar":{"name":"photos_that_day_link","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"photos_that_month_link","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"photos_that_year_link","hide":"true","scalar_type":"ParsedURL","kids":[]}},{"scalar":{"name":"photos_that_day","navigates_to":"photos_that_day_link","scalar_type":"String","kids":[]}},{"scalar":{"name":"photos_that_month","navigates_to":"photos_that_month_link","scalar_type":"String","kids":[]}},{"scalar":{"name":"photos_that_year","navigates_to":"photos_that_year_link","scalar_type":"String","kids":[]}}]},{"name":"flickr_image_detail_two","comment":"A Flickr Image result page","extends":"compound_document","parser":"xpath","visibility":"GLOBAL","kids":[{"scalar":{"name":"title","xpath":".\/h1","context_node":"photoTD","kids":[]}},{"scalar":{"name":"description","xpath":".\/div[@class='photo-desc']","context_node":"photoTD","ignore_in_term_vector":"true","kids":[]}},{"scalar":{"name":"views","xpath":"\/\/span[@id='view-count']","scalar_type":"String","kids":[],"filter":{"regex":" views$","replace":""}}},{"scalar":{"name":"place","xpath":".\/\/a[@id='photoGeolocation-storylink']","navigates_to":"place_link","scalar_type":"String","kids":[]}},{"scalar":{"name":"place_link","xpath":"\/\/html\/head\/link[2]\/@href","hide":"true","scalar_type":"ParsedURL","kids":[],"filter":{"regex":"$","replace":"nearby?show=thumb&fromfilter=1&by=everyone&taken=alltime&sort=distance&show=detail"}}},{"collection":{"name":"flickr_tags","xpath":"\/\/a[@class='tag-item ywa-track']","promote_children":"true","child_type":"flickr_tag","kids":[{"scalar":{"name":"tag_name","xpath":".","kids":[]}},{"scalar":{"name":"tag_link","xpath":".\/@href","kids":[]}}]}},{"composite":{"name":"author_photos","xpath":"\/\/div[@id='photo-story']","type":"author_photos","kids":[{"scalar":{"name":"author_photostream_link","xpath":".\/p[@id='photo-story-story']\/a[1]\/@href","ignore_in_term_vector":"true","kids":[],"filter":{"regex":"archives\/date-taken\/[0-9]+\/[0-9]+\/[0-9]+\/$","replace":""}}},{"scalar":{"name":"author_photostream","xpath":".\/\/div[@id='photo-story-attribution']\/p\/span\/a\/@href","kids":[],"filter":{"regex":"\/photos","replace":""}}},{"scalar":{"name":"photos_that_day_link","xpath":".\/p[@id='photo-story-story']\/a[1]\/@href","ignore_in_term_vector":"true","kids":[]}},{"scalar":{"name":"photos_that_month_link","xpath":".\/p[@id='photo-story-story']\/a[1]\/@href","ignore_in_term_vector":"true","kids":[],"filter":{"regex":"[0-9]+\/$","replace":""}}},{"scalar":{"name":"photos_that_year_link","xpath":".\/p[@id='photo-story-story']\/a[1]\/@href","ignore_in_term_vector":"true","kids":[],"filter":{"regex":"[0-9]+\/[0-9]+\/$","replace":""}}},{"scalar":{"name":"photos_that_day","xpath":".\/p[@id='photo-story-story']\/a[1]","ignore_in_term_vector":"true","kids":[]}},{"scalar":{"name":"photos_that_month","xpath":".\/p[@id='photo-story-story']\/a[1]","ignore_in_term_vector":"true","kids":[],"filter":{"regex":"[0-9]+,","replace":""}}},{"scalar":{"name":"photos_that_year","xpath":".\/p[@id='photo-story-story']\/a[1]","ignore_in_term_vector":"true","kids":[],"filter":{"regex":"\\w+ [0-9]+,","replace":""}}}]}}],"def_var":[{"name":"photoTD","xpath":"\/\/div[@id='meta']","type":"node"}],"selector":[{"name":"flickr_image_detail_selector","url_regex":"http:\/\/www.flickr.com\/photos\/(?!tags)[A-z0-9_@-]+\/[0-9]+\/$","domain":"flickr.com"}]},{"name":"flickr_nearby","comment":"Searching from a photo for nearby photos","extends":"search","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"search_results","xpath":"\/\/span[@class='photo_container pc_m']","child_type":"flickr_nearby_search_result","child_extends":"search_result","kids":[{"scalar":{"name":"location","xpath":".\/a\/@href","kids":[],"filter":{"regex":"nearby.+detail$","replace":"nearby?show=thumb&fromfilter=1&by=everyone&taken=alltime&sort=distance&show=detail"}}},{"scalar":{"name":"title","xpath":".\/a","kids":[]}},{"scalar":{"name":"description","xpath":".\/a\/@title","kids":[]}},{"scalar":{"name":"link_other","xpath":".\/a\/@href","scalar_type":"ParsedURL","kids":[],"filter":{"regex":"nearby.+detail$","replace":""}}}]}}],"selector":[{"name":"flickr_nearby_selector"}],"semantic_actions":[{"get_field":{"name":"search_results","arg":[]}},{"for_each":{"collection":"search_results","as":"res","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"res","name":"location","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"location"}]}},{"get_field":{"object":"res","name":"link_other","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"link_other"}]}}]}}]},{"name":"flickr_groups","comment":"Searching from a photo for nearby photos","extends":"search","parser":"xpath","visibility":"GLOBAL","kids":[{"collection":{"name":"flickr_tags","xpath":"\/\/div[@class='Paginator']\/a\/@href","hide":"true","child_type":"flickr_tag","kids":[{"scalar":{"name":"tag_name","xpath":".","kids":[]}},{"scalar":{"name":"tag_link","xpath":".","kids":[]}}]}},{"collection":{"name":"search_results","xpath":"\/\/p[@class='PoolList']","kids":[{"scalar":{"name":"location","xpath":".\/span\/a\/@href","kids":[],"filter":{"regex":"\/in\/.*$","replace":"\/"}}},{"scalar":{"name":"title","xpath":".\/span\/a","kids":[]}},{"scalar":{"name":"description","xpath":".\/span\/a\/@title","kids":[]}}]}}],"selector":[{"url_regex":"^http:\/\/www.flickr.com\/groups\/[A-z0-9_@-]+\/pool","domain":"flickr.com"}],"semantic_actions":[{"get_field":{"name":"search_results","arg":[]}},{"for_each":{"collection":"search_results","as":"res","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"res","name":"location","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"location"}]}}]}},{"get_field":{"name":"flickr_tags","arg":[]}},{"for_each":{"collection":"flickr_tags","as":"res","arg":[],"nested_semantic_action_list":[{"get_field":{"object":"res","name":"tag_link","arg":[]}},{"parse_document":{"now":"true","link_type":"OTHER_SEMANTIC_ACTION","number_of_top_documents":"1","arg":[{"name":"location","value":"tag_link"}]}}]}}]}]}}