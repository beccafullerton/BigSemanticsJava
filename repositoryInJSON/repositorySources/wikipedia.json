{"meta_metadata_repository":{"name":"wikipedia", "package":"ecologylab.semantics.generated.library.wikipedia", "default_user_agent_name":"chrome_2", "meta_metadata":[{"name":"wikipedia_search", "comment":"Wikipedia Web Search Class", "type":"search", "user_agent_name":"firefox_2", "parser":"xpath", "visibility":"GLOBAL", "kids":[{"collection":{"name":"search_results", "xpath":"\/\/div[@id='bodyContent']\/div[@class='searchresults']\/ul[@class='mw-search-results']\/li", "kids":[{"scalar":{"name":"title", "xpath":".\/a"}},{"scalar":{"name":"location", "xpath":".\/a\/@href"}},{"scalar":{"name":"description", "xpath":".\/div[@class='searchresult']"}}]}}], "selector":[{"url_stripped":"http:\/\/en.wikipedia.org\/w\/index.php?title=Special%3ASearch"}], "semantic_actions":[{"get_field":{"name":"search_results"}},{"for_each":{"collection":"search_results", "as":"res", "nested_semantic_action_list":[{"get_field":{"object":"res", "name":"location"}},{"parse_document":{"now":"true", "link_type":"OTHER_SEMANTIC_ACTION", "number_of_top_documents":"1", "arg":[{"name":"location", "value":"location"}]}}]}}]},{"name":"wikipedia_page_type", "comment":"An article on wikipedia", "extends":"compound_document", "visibility":"GLOBAL", "kids":[{"collection":{"name":"paragraphs", "comment":"Paragraphs in the article.", "child_type":"paragraph", "child_extends":"metadata", "kids":[{"scalar":{"name":"paragraph_text", "scalar_type":"String"}},{"collection":{"name":"anchors", "comment":"Anchors (links) in the paragraph, typically links to another Wikipedia article.", "child_type":"wiki_anchor", "child_extends":"metadata", "kids":[{"scalar":{"name":"link", "scalar_type":"ParsedURL"}},{"scalar":{"name":"anchor_text", "scalar_type":"String"}},{"scalar":{"name":"target_title", "scalar_type":"String"}}]}}]}},{"collection":{"name":"categories", "comment":"Wikipedia Categories", "child_type":"category", "child_extends":"metadata", "kids":[{"scalar":{"name":"name", "navigates_to":"cat_link", "scalar_type":"String"}},{"scalar":{"name":"cat_link", "hide":"true", "scalar_type":"ParsedURL"}}]}},{"collection":{"name":"thumbinners", "hide":"true", "child_type":"thumbinner", "child_extends":"metadata", "kids":[{"scalar":{"name":"thumb_img_src", "scalar_type":"ParsedURL"}},{"scalar":{"name":"thumb_img_caption", "scalar_type":"String"}}]}}]},{"name":"wikipedia_page", "comment":"An article on wikipedia (used in cF)", "extends":"wikipedia_page_type", "parser":"xpath", "visibility":"GLOBAL", "kids":[{"scalar":{"name":"title", "xpath":"\/\/h1[@id='firstHeading']"}},{"scalar":{"name":"description", "xpath":"\/\/div[@class='bodycontent']\/p[1]"}},{"scalar":{"name":"main_image_src", "xpath":".\/@src", "context_node":"main_image", "hide":"true", "scalar_type":"ParsedURL"}},{"collection":{"name":"paragraphs", "xpath":"\/\/div[@id='bodyContent']\/p\/a[starts-with(@href,'\/wiki\/')]\/..", "hide":"true", "child_type":"paragraph", "kids":[{"scalar":{"name":"paragraph_text", "xpath":"string(.)"}},{"collection":{"name":"anchors", "xpath":".\/a[starts-with(@href,'\/wiki\/')]", "kids":[{"scalar":{"name":"link", "xpath":".\/@href"}},{"scalar":{"name":"anchor_text", "xpath":"string(.)"}},{"scalar":{"name":"target_title", "xpath":".\/@title"}}]}}]}},{"collection":{"name":"categories", "xpath":"\/\/div[@id='mw-normal-catlinks']\/\/a[starts-with(@href,'\/wiki\/Category:')]", "promote_children":"true", "child_type":"category", "kids":[{"scalar":{"name":"name", "xpath":"string(.)"}},{"scalar":{"name":"cat_link", "xpath":".\/@href"}}]}},{"collection":{"name":"thumbinners", "xpath":"\/\/div[@class='thumbinner']", "child_type":"thumbinner", "kids":[{"scalar":{"name":"thumb_img_src", "xpath":".\/a\/img\/@src"}},{"scalar":{"name":"thumb_img_caption", "xpath":"string(.)"}}]}}], "def_var":[{"name":"main_image", "xpath":"\/\/*[starts-with(@class,'infobox')]\/\/img[1]", "type":"node"}], "selector":[{"url_regex":"http:\/\/en.wikipedia.org\/wiki\/[^\/:]*", "domain":"wikipedia.org"}], "semantic_actions":[{"get_field":{"name":"main_image_src"}},{"if":{"checks":[{"not_null":{"value":"main_image_src"}}], "nested_semantic_action_list":[{"create_and_visualize_img_surrogate":{"arg":[{"name":"image_purl", "value":"main_image_src"}]}}]}},{"get_field":{"name":"paragraphs"}},{"for_each":{"collection":"paragraphs", "as":"para", "current_index":"para_index", "size":"para_list_size", "nested_semantic_action_list":[{"get_field":{"object":"para", "name":"paragraph_text"}},{"get_field":{"object":"para", "name":"anchors"}},{"for_each":{"collection":"anchors", "as":"anch", "current_index":"cur_anchor_index", "size":"anchor_list_size", "nested_semantic_action_list":[{"get_field":{"object":"anch", "name":"link"}},{"get_field":{"object":"anch", "name":"anchor_text"}},{"if":{"checks":[{"not_null":{"value":"anchor_text"}},{"not_null":{"value":"link"}}], "nested_semantic_action_list":[{"parse_document":{"link_type":"OTHER_SEMANTIC_ACTION", "only_pick_top_documents":"true", "number_of_top_documents":"5", "arg":[{"name":"anchor_text", "value":"anchor_text"},{"name":"ignore_context_for_tv", "value":"true"},{"name":"location", "value":"link"},{"name":"outer_loop_size", "value":"para_list_size"},{"name":"outer_loop_index", "value":"para_index"},{"name":"current_index", "value":"cur_anchor_index"},{"name":"size", "value":"anchor_list_size"}]}}]}}]}},{"create_and_visualize_text_surrogate":{"arg":[{"name":"text", "value":"paragraph_text"}]}}]}},{"get_field":{"name":"thumbinners"}},{"for_each":{"collection":"thumbinners", "as":"thumbinner", "nested_semantic_action_list":[{"get_field":{"object":"thumbinner", "name":"thumb_img_src"}},{"get_field":{"object":"thumbinner", "name":"thumb_img_caption"}},{"if":{"checks":[{"not_null":{"value":"thumb_img_src"}},{"not_null":{"value":"thumb_img_caption"}}], "nested_semantic_action_list":[{"create_and_visualize_img_surrogate":{"arg":[{"name":"caption", "value":"thumb_img_caption"},{"name":"image_purl", "value":"thumb_img_src"}]}}]}}]}}]},{"name":"wikipedia_page_for_parsing", "comment":"Used to parse wikipedia pages for concept mapping project.", "type":"wikipedia_page_type", "parser":"xpath", "visibility":"GLOBAL", "kids":[{"collection":{"name":"paragraphs", "xpath":"\/\/p[string-length(.)>1]", "kids":[{"scalar":{"name":"paragraph_text", "xpath":"."}},{"collection":{"name":"anchors", "xpath":".\/a[string-length(@title)>0]", "kids":[{"scalar":{"name":"link", "xpath":".\/@href"}},{"scalar":{"name":"anchor_text", "xpath":"."}},{"scalar":{"name":"target_title", "xpath":".\/@title"}}]}}]}}]}]}}